<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live Matka Results</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css">
</head>

<body>

<header>
  <h1>LIVE MATKA RESULTS</h1>
  <div id="todayDate"></div>
</header>

<main id="gamesList"></main>

<!-- Floating WhatsApp -->
<div class="whatsapp">
  <a href="https://wa.me/918956490113" target="_blank">
    <img src="whatsapp.png" alt="WhatsApp">
  </a>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {

  /* ---------- DATE ---------- */
  const dateBox = document.getElementById("todayDate");
  if (dateBox) {
    dateBox.innerText = "üìÖ " + new Date().toDateString();
  }

  const gamesList = document.getElementById("gamesList");
  if (!gamesList) return;

  const now = new Date();
  const today = now.getDay(); // 0=Sun
  const baseNowMin = now.getHours() * 60 + now.getMinutes();

  function toMin(t) {
    const p = t.split(":");
    return (+p[0]) * 60 + (+p[1]);
  }

  function ampm(t) {
    let [h, m] = t.split(":").map(Number);
    const ap = h >= 12 ? "PM" : "AM";
    h = h % 12 || 12;
    return h + ":" + String(m).padStart(2, "0") + " " + ap;
  }

  function worksToday(rule) {
    if (rule === "ALL") return true;
    if (rule === "MF") return today >= 1 && today <= 5;
    if (rule === "MS") return today >= 1 && today <= 6;
    return false;
  }

  const games = [
    {n:"RAJA-RANI MORNING",o:"09:40",c:"10:40",r:"257-49-379",l:"https://sattamatkadpboss.co/record/raja-rani-morning-panel-chart.php",d:"ALL"},
    {n:"KARNATAKA DAY",o:"10:00",c:"11:00",r:"159-55-690",l:"https://sattamatkadpboss.co/karnataka-day-panel-chart.php",d:"ALL"},
    {n:"KALYAN MORNING",o:"11:00",c:"12:02",r:"469-97-160",l:"https://sattamatkadpboss.co/record/kalyan-morning-penal-chart.php",d:"ALL"},
    {n:"MADHUR MORNING",o:"11:35",c:"12:35",r:"669-15-159",l:"https://sattamatkadpboss.co/madhur-morning-panel-chart.php",d:"ALL"},
    {n:"SRIDEVI",o:"11:35",c:"12:35",r:"250-78-170",l:"https://sattamatkadpboss.co/record/sridevi-satta-penal-chart.php",d:"ALL"},
    {n:"MAHARANI",o:"12:15",c:"14:15",r:"489-13-157",l:"https://sattamatkadpboss.co/maharani-panel-chart.php",d:"ALL"},
    {n:"TIME BAZAR",o:"13:00",c:"14:00",r:"136-08-990",l:"https://sattamatkadpboss.co/time-bazar-panel-chart.php",d:"ALL"},
    {n:"MADHUR DAY",o:"13:30",c:"14:30",r:"188-75-041",l:"https://sattamatkadpboss.co/madhur-day-panel-chart.php",d:"ALL"},
    {n:"PRABHAT",o:"13:30",c:"15:00",r:"230-50-550",l:"https://sattamatkadpboss.co/record/prabhat-panel-chart.php",d:"MS"},
    {n:"MILAN DAY",o:"15:00",c:"17:00",r:"139-33-247",l:"https://sattamatkadpboss.co/record/milan-day-penal-chart.php",d:"ALL"},
    {n:"KALYAN NIGHT",o:"21:20",c:"23:20",r:"190-03-120",l:"https://sattamatkadpboss.co/record/kalyan-night-penal-chart.php",d:"MF"},
    {n:"MAIN BAZAR",o:"21:35",c:"00:05",r:"240-65-690",l:"https://sattamatkadpboss.co/main-bazar-panel-chart.php",d:"MF"}
  ];

  games.forEach(g => {
    let open = toMin(g.o);
    let close = toMin(g.c);
    let nowMin = baseNowMin;

    if (close < open) {
      close += 1440;
      if (nowMin < open) nowMin += 1440;
    }

    const live = worksToday(g.d) && nowMin >= open && nowMin <= close;

    const card = document.createElement("div");
    card.className = "game-card" + (live ? "" : " closed");

    card.innerHTML = `
      <div class="game-top">
        <div class="game-name">
          ${g.n}
          ${live ? '<span class="live">LIVE</span>' : '<span class="closed-tag">CLOSED</span>'}
        </div>
        <a class="mini-wa" href="https://wa.me/918956490113" target="_blank"
           onclick="event.stopPropagation()">‡§Ü‡§ú ‡§ï‡§æ ‡§´‡•ç‡§∞‡•Ä ‡§ó‡•á‡§Æ</a>
      </div>
      <div class="result"><strong>${g.r}</strong></div>
      <div class="time">(${ampm(g.o)} - ${ampm(g.c)})</div>
    `;

    card.onclick = function () {
      window.open(g.l, "_blank");
    };

    gamesList.appendChild(card);
  });

});
</script>

</body>
</html>
